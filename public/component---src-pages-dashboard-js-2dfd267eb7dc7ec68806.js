"use strict";(self.webpackChunkadmin_panel=self.webpackChunkadmin_panel||[]).push([[643],{3808:function(e,t,n){n.d(t,{VB:function(){return o},bV:function(){return i},x4:function(){return a}});const r="https://api.interpol.sd-lab.nl/api",a=async e=>{try{const t=await fetch("https://api.interpol.sd-lab.nl/api/create-session",{method:"POST",body:e,credentials:"include"}),n=await t.text();if(!t.ok)throw new Error("HTTP error! status: "+t.status);const r=JSON.parse(n);return r.error?(console.error("Login error:",r.error),r.error):(console.log("Login successful:",r.message),!0)}catch(t){console.error("Error creating session:",t)}},l=async e=>{try{const t=await fetch(r+"/students-by-group?id="+e);return await t.json()}catch(t){return console.error(t),[]}},c=async e=>{try{const t=await fetch(r+"/challenges-by-group?id="+e);return await t.json()}catch(t){return console.error(t),[]}},s=async e=>{try{const t=await fetch(r+"/challenge-by-id?id="+e);return await t.json()}catch(t){return console.error(t),[]}},o=async e=>{try{const t=await fetch(r+"/remove-student?id="+e,{method:"DELETE",credentials:"include"});if(!t.ok)throw new Error("HTTP error! status: "+t.status);return await t.json()}catch(t){return console.error(t),[]}},i=async()=>{try{const e=await fetch(r+"/check-type",{method:"GET",credentials:"include"});if(!e.ok)throw new Error("HTTP error! status: "+e.status);const t=await e.json();return t&&t.error?(console.error("Error checking session:",t.error),!1):"DOCENT"===t}catch(e){return console.error("Error checking session:",e),!1}};t.ZP=()=>{let e=[];return(async()=>{const t=await(async()=>{try{const e=await fetch(r+"/groups");return await e.json()}catch(e){return console.error(e),[]}})();if(t.length>0)for(const n of t){let t=n;const r=await l(n.id);t.students=r;const a=await c(n.id);for(const e of a)await s(e.challenge_id).then((t=>{e.name=t[0].name,e.minimum_points=t[0].minimum_points,e.time_limit=t[0].time_limit})).catch((e=>console.error(e)));t.challenges=a,e.push(t)}else console.warn("No groups found.");return e})()}},6444:function(e,t,n){n.r(t),n.d(t,{Head:function(){return f},default:function(){return g}});var r=n(7294),a=n(7896),l=n(3808);var c=e=>{let{filters:t,setFilters:n}=e;return r.createElement("section",{id:"filter"},r.createElement("input",{type:"text",placeholder:"Zoek door groepen..",onChange:e=>{(e=>{n({...t,searchGroup:e.target.value})})(e)},value:t.searchGroup}),r.createElement("input",{type:"text",placeholder:"Zoek door studenten..",onChange:e=>{(e=>{n({...t,searchStudent:e.target.value})})(e)},value:t.searchStudent}),r.createElement("button",{onClick:()=>{(async()=>{try{const e=await fetch("https://api.interpol.sd-lab.nl/api/logout.php",{method:"POST",credentials:"include"});if(!e.ok)throw new Error("HTTP error! status: "+e.status);const t=await e.json();console.log("Logout successful:",t.message),(0,a.navigate)("/")}catch(e){console.error("Error logging out:",e)}})()}},"Uitloggen"))},s=n(5785),o=n(3253),i=n.n(o);var u=e=>{let{modalIsOpen:t,afterOpenModal:n,closeModal:a,customStyles:l,contentLabel:c,children:s}=e;const{0:o,1:u}=(0,r.useState)(!1);return(0,r.useEffect)((()=>{u(!0)}),[]),o?r.createElement(i(),{isOpen:t,onAfterOpen:n,onRequestClose:a,style:l,contentLabel:c},s):null};var m=e=>{let{onClick:t,className:n}=e;return r.createElement("svg",{onClick:t,className:n,height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{d:"M20.7457 3.32851C20.3552 2.93798 19.722 2.93798 19.3315 3.32851L12.0371 10.6229L4.74275 3.32851C4.35223 2.93798 3.71906 2.93798 3.32854 3.32851C2.93801 3.71903 2.93801 4.3522 3.32854 4.74272L10.6229 12.0371L3.32856 19.3314C2.93803 19.722 2.93803 20.3551 3.32856 20.7457C3.71908 21.1362 4.35225 21.1362 4.74277 20.7457L12.0371 13.4513L19.3315 20.7457C19.722 21.1362 20.3552 21.1362 20.7457 20.7457C21.1362 20.3551 21.1362 19.722 20.7457 19.3315L13.4513 12.0371L20.7457 4.74272C21.1362 4.3522 21.1362 3.71903 20.7457 3.32851Z",fill:"#0F0F0F"}))};var d=e=>{let{onClick:t,className:n}=e;return r.createElement("svg",{onClick:t,className:n,height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{d:"M4 12.6111L8.92308 17.5L20 6.5",stroke:"#000000","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}))};var p=e=>{let{onClick:t,className:n}=e;return r.createElement("svg",{onClick:t,className:n,height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M21 8C21 6.34315 19.6569 5 18 5H10C8.34315 5 7 6.34315 7 8V20C7 21.6569 8.34315 23 10 23H18C19.6569 23 21 21.6569 21 20V8ZM19 8C19 7.44772 18.5523 7 18 7H10C9.44772 7 9 7.44772 9 8V20C9 20.5523 9.44772 21 10 21H18C18.5523 21 19 20.5523 19 20V8Z",fill:"#0F0F0F"}),r.createElement("path",{d:"M6 3H16C16.5523 3 17 2.55228 17 2C17 1.44772 16.5523 1 16 1H6C4.34315 1 3 2.34315 3 4V18C3 18.5523 3.44772 19 4 19C4.55228 19 5 18.5523 5 18V4C5 3.44772 5.44772 3 6 3Z",fill:"#0F0F0F"}))};var h=()=>r.createElement("svg",{fill:"#000000",height:"18",viewBox:"0 0 1000 1000",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{d:"M767 336H233q-12 0-21 9t-9 21l38 505q1 13 12 21.5t30 8.5h434q18 0 29-8.5t13-21.5l38-505q0-12-9-21t-21-9zM344 841q-10 0-18-9t-8-21l-26-386q0-12 9-20.5t21-8.5 21 8.5 9 20.5l18 386q0 12-7.5 21t-18.5 9zm182-31q0 13-7.5 22t-18.5 9-18.5-9-7.5-22l-4-385q0-12 9-20.5t21-8.5 21 8.5 9 20.5zm156 1q0 12-8 21t-18 9q-11 0-18.5-9t-7.5-21l18-386q0-12 9-20.5t21-8.5 21 8.5 9 20.5zm101-605l-179-30q-12-2-15-15l-8-33q-4-20-14-26-6-3-22-3h-90q-16 0-23 3-10 6-13 26l-8 33q-2 13-15 15l-179 30q-19 3-31.5 14.5T173 249v28q0 9 6.5 15t15.5 6h610q9 0 15.5-6t6.5-15v-28q0-17-12.5-28.5T783 206z"}));var E=e=>{let{groups:t}=e;const n="https://api.interpol.sd-lab.nl/",{0:a,1:c}=(0,r.useState)(null),{0:o,1:i}=(0,r.useState)([]),{0:E,1:g}=(0,r.useState)([]),f=()=>c(null),w={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}};(0,r.useEffect)((()=>{i([])}),[a]);const y=(e,t)=>{navigator.clipboard.writeText(t),e.stopPropagation(),e.target.closest("li").querySelector(".checkmark").classList.add("show"),e.target.closest("li").querySelector(".copy").classList.add("hide"),setTimeout((()=>{e.target.closest("li").querySelector(".checkmark").classList.remove("show"),e.target.closest("li").querySelector(".copy").classList.remove("hide")}),2e3)};return r.createElement(r.Fragment,null,r.createElement("section",{id:"groupHeaders"},r.createElement("div",{className:"groupsHeader"},r.createElement("h1",null,"Groepen")),r.createElement("div",{className:"studentsHeader"},r.createElement("h1",null,"Studentnummer"),r.createElement("h1",null,"Naam")),r.createElement("div",{className:"challengesHeader"},r.createElement("h1",null,"Uitdagingen")),r.createElement("div",{className:"challengeKeysHeader"},r.createElement("h1",null,"Code"))),r.createElement("section",{id:"groups"},r.createElement("ul",{id:"group-tabs"},t&&t.map(((e,t)=>r.createElement(r.Fragment,null,r.createElement("li",{className:"group",key:t,onClick:()=>{var t;t=e.id,c(t)}},r.createElement("section",{className:"groupSection"},r.createElement("div",{className:"groupImage"},r.createElement("img",{src:""+(n+e.image_url),alt:e.name})),r.createElement("div",null,r.createElement("h2",null,e.name),r.createElement("p",null,e.class))),r.createElement("section",{className:"studentsSection"},r.createElement("ul",null,e.students.map(((e,t)=>r.createElement("li",{key:t},r.createElement("p",null,e.student_number),r.createElement("p",null,e.name)))))),r.createElement("section",{className:"challengesSection"},r.createElement("ul",null,e.challenges.map(((e,t)=>r.createElement("li",{key:t},r.createElement("h3",null,e.name),r.createElement("div",null,e.completed?r.createElement("span",null,r.createElement(d,{className:"green"})):r.createElement("span",null,r.createElement(m,{className:"red"})))))))),r.createElement("section",{className:"challengeKeys"},r.createElement("ul",{key:t},e.challenges.map(((e,t)=>r.createElement("li",{key:t},r.createElement("h3",{className:E.includes(e.keycode)?"visible":"invisible",onClick:t=>{var n,r;n=t,r=e.keycode,E.includes(r)?g(E.filter((e=>e!==r))):g([].concat((0,s.Z)(E),[r])),n.stopPropagation()}},e.keycode),r.createElement(p,{className:"copy",onClick:t=>{y(t,e.keycode)}}),r.createElement(d,{className:"checkmark green hide",onClick:t=>{y(t,e.keycode)}}))))))),r.createElement(u,{modalIsOpen:a===e.id,afterOpenModal:null,closeModal:f,customStyles:w,contentLabel:"Edit group"},r.createElement("div",{className:"editGroup"},r.createElement("section",{className:"groupSection"},r.createElement("div",{className:"groupImage"},r.createElement("img",{src:""+(n+e.image_url),alt:e.name})),r.createElement("div",null,r.createElement("input",{type:"text",placeholder:e.name}),r.createElement("input",{type:"text",placeholder:e.class}))),r.createElement("ul",{className:"editStudents"},e.students.map(((t,n)=>r.createElement("li",{key:n},r.createElement("input",{type:"number",placeholder:t.student_number}),r.createElement("input",{type:"text",placeholder:t.name}),r.createElement(h,{onClick:()=>{var n,r,a;n=t.student_number,r=e.id,a=t.name,alert("Weet je zeker dat je "+a+" wilt verwijderen uit deze groep?"),(0,l.VB)(n),console.log(n,r)}})))),o.map(((e,t)=>r.createElement("li",{key:t},r.createElement("input",{type:"number",placeholder:e.student_number}),r.createElement("input",{type:"text",placeholder:e.name}),r.createElement(h,{onClick:()=>{i(o.filter(((e,n)=>n!==t)))}}))))),r.createElement("div",{className:"editButtons"},r.createElement("button",{onClick:()=>{i([].concat((0,s.Z)(o),[{name:"",student_number:""}]))}},"Student toevoegen"),r.createElement("button",{onClick:()=>{console.log("opslaan")}},"Opslaan"))))))))))};var g=()=>{const{0:e,1:t}=(0,r.useState)([]),{0:n,1:s}=(0,r.useState)([]),{0:o,1:i}=(0,r.useState)({searchGroup:"",searchStudent:""}),{0:u,1:m}=(0,r.useState)(!1);return(0,r.useEffect)((()=>{(0,l.bV)().then((e=>{m(e),e||(0,a.navigate)("/")}))}),[]),(0,r.useEffect)((()=>{if(u){(async()=>{const e=await(0,l.ZP)();t(e),s(e)})()}}),[u]),(0,r.useEffect)((()=>{i({...o,searchStudent:""});const t=o.searchGroup.toLowerCase(),n=e.filter((e=>e.name.toLowerCase().includes(t)));s(n)}),[o.searchGroup]),(0,r.useEffect)((()=>{i({...o,searchGroup:""});const t=o.searchStudent.toLowerCase(),n=e.filter((e=>e.students.some((e=>e.name.toLowerCase().includes(t)))));s(n)}),[o.searchStudent]),r.createElement(r.Fragment,null,u&&r.createElement("main",null,r.createElement(c,{filters:o,setFilters:i}),r.createElement(E,{groups:n})))};const f=()=>r.createElement("title",null,"Admin panel")}}]);
//# sourceMappingURL=component---src-pages-dashboard-js-2dfd267eb7dc7ec68806.js.map