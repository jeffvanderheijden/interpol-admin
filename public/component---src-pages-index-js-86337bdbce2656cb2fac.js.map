{"version":3,"file":"component---src-pages-index-js-86337bdbce2656cb2fac.js","mappings":"gPAAA,MAAMA,EAAM,qCAECC,EAAQC,UACjB,IACI,MAAMC,QAAiBC,MAAM,oDAAqD,CAC9EC,OAAQ,OACRC,KAAMC,EACNC,YAAa,YAGXC,QAAqBN,EAASO,OAEpC,IAAKP,EAASQ,GACV,MAAM,IAAIC,MAAM,uBAAuBT,EAASU,QAGpD,MAAMC,EAAgBC,KAAKC,MAAMP,GAGjC,OAAIK,EAAcG,OACdC,QAAQD,MAAM,eAAgBH,EAAcG,OACrCH,EAAcG,QAErBC,QAAQC,IAAI,oBAAqBL,EAAcM,UACxC,EAGf,CAAE,MAAOH,GACLC,QAAQD,MAAM,0BAA2BA,EAC7C,GAGSI,EAAcnB,UACvB,IACI,MAAMC,QAAiBC,MAASJ,EAAG,yBAAyBsB,GAC5D,aAAanB,EAASoB,MAC1B,CAAE,MAAON,GAEL,OADAC,QAAQD,MAAMA,GACP,EACX,GAaSO,EAAgBtB,UACzB,IACI,MAAMC,QAAiBC,MAASJ,EAAG,2BAA2BsB,GAC9D,aAAanB,EAASoB,MAC1B,CAAE,MAAON,GAEL,OADAC,QAAQD,MAAMA,GACP,EACX,GAGSQ,EAAevB,UACxB,IACI,MAAMC,QAAiBC,MAASJ,EAAG,uBAAuB0B,GAC1D,aAAavB,EAASoB,MAC1B,CAAE,MAAON,GAEL,OADAC,QAAQD,MAAMA,GACP,EACX,GAGSU,EAAgBzB,UACzB,IACI,MAAMC,QAAiBC,MAASJ,EAAG,sBAAsB4B,EAAa,CAClEvB,OAAQ,SACRG,YAAa,YAGjB,IAAKL,EAASQ,GACV,MAAM,IAAIC,MAAM,uBAAuBT,EAASU,QAGpD,aAAaV,EAASoB,MAC1B,CAAE,MAAON,GAEL,OADAC,QAAQD,MAAMA,GACP,EACX,GAGSY,EAAa3B,MAAOK,EAAUuB,KACvC,IACI,MAAM3B,QAAiBC,MAASJ,EAAG,eAAgB,CAC/CK,OAAQ,OACRC,KAAMC,IAEJwB,QAAgB5B,EAASO,OAC3BK,KAAKC,MAAMe,GAASX,SACpBU,GAA2B,EAEnC,CAAE,MAAOb,GACLC,QAAQD,MAAM,uBAAwBA,EAC1C,GAGSe,EAAa9B,UACtB,IACIgB,QAAQC,IAAIG,GACZ,MAAMnB,QAAiBC,MAASJ,EAAG,0BAA0BsB,EAAW,CACpEjB,OAAQ,SACRG,YAAa,YAGjB,IAAKL,EAASQ,GACV,MAAM,IAAIC,MAAM,uBAAuBT,EAASU,QAGpD,aAAaV,EAASoB,MAC1B,CAAE,MAAON,GAEL,OADAC,QAAQD,MAAMA,GACP,EACX,GAwCSgB,EAAe/B,UACxB,IACI,MAAMC,QAAiBC,MAASJ,EAAG,cAAe,CAC9CK,OAAQ,MACRG,YAAa,YAGjB,IAAKL,EAASQ,GACV,MAAM,IAAIC,MAAM,uBAAuBT,EAASU,QAGpD,MAAMqB,QAAiB/B,EAASoB,OAGhC,OAFAL,QAAQC,IAAIe,GAERA,GAAYA,EAASjB,OACrBC,QAAQD,MAAM,0BAA2BiB,EAASjB,QAC3C,GAIS,WAAbiB,CAEX,CAAE,MAAOjB,GAEL,OADAC,QAAQD,MAAM,0BAA2BA,IAClC,CACX,GAGJ,KAhEkB,KACd,IAAIkB,EAAa,GAgCjB,MA9BqBjC,WACjB,MAAMkC,OAvFWlC,WACrB,IACI,MAAMC,QAAiBC,MAASJ,EAAG,WACnC,aAAaG,EAASoB,MAC1B,CAAE,MAAON,GAEL,OADAC,QAAQD,MAAMA,GACP,EACX,GAgFyBoB,GACrB,GAAID,EAAOE,OAAS,EAChB,IAAK,MAAMC,KAASH,EAAQ,CACxB,IAAII,EAAUD,EAEd,MAAME,QAAiBpB,EAAYkB,EAAMG,IACzCF,EAAQC,SAAWA,EAEnB,MAAME,QAAmBnB,EAAce,EAAMG,IAE7C,IAAK,MAAME,KAAaD,QACdlB,EAAamB,EAAUC,cACxBC,MAAKC,IACFH,EAAgB,KAAIG,EAAK,GAAGC,KAC5BJ,EAA0B,eAAIG,EAAK,GAAGE,eACtCL,EAAsB,WAAIG,EAAK,GAAGG,UAAU,IAC7CC,OAAMlC,GAASC,QAAQD,MAAMA,KAExCuB,EAAQG,WAAaA,EAErBR,EAAWiB,KAAKZ,EACpB,MAEAtB,QAAQmC,KAAK,oBAGjB,OAAOlB,CAAU,EAGdmB,EAAc,C,gICzHzB,MAhCc,MAeVC,EAAAA,EAAAA,YAAU,MACNtB,EAAAA,EAAAA,MAAea,MAAKU,IAChBA,IAAaC,EAAAA,EAAAA,UAAS,aAAa,GACrC,GACH,IAGC,uBAAKf,GAAG,gBACJ,wBAAMA,GAAG,YAAYgB,SAAWC,IArBrBzD,WACfyD,EAAEC,iBACF,MAAMrD,EAAW,IAAIsD,SACrBtD,EAASuD,OAAO,WAAYH,EAAEI,OAAOC,SAASC,SAASC,OACvD3D,EAASuD,OAAO,WAAYH,EAAEI,OAAOC,SAASG,SAASD,aAElCjE,EAAAA,EAAAA,IAAMM,KAEvBkD,EAAAA,EAAAA,UAAS,aACb,EAY4CW,CAAWT,EAAE,GACjD,yBAAOU,KAAK,OAAO3B,GAAG,WAAW4B,YAAY,aAC7C,yBAAOD,KAAK,WAAW3B,GAAG,WAAW4B,YAAY,aACjD,0BAAQD,KAAK,SAASE,UAAU,OAAM,4BAAM,gBCpB5D,MANkB,IAEV,gBAAC,EAAK,MAMP,MAAMC,EAAO,IAAM,6BAAO,Q","sources":["webpack://admin-panel/./src/helpers/data/dataLayer.js","webpack://admin-panel/./src/components/Login/Login.js","webpack://admin-panel/./src/pages/index.js"],"sourcesContent":["const api = \"https://api.interpol.sd-lab.nl/api\";\n\nexport const login = async (formData) => {\n    try {\n        const response = await fetch('https://api.interpol.sd-lab.nl/api/create-session', {\n            method: 'POST',\n            body: formData,\n            credentials: 'include' // Ensure cookies are included with the request\n        });\n\n        const responseText = await response.text(); // Read the raw response body as text\n\n        if (!response.ok) {\n            throw new Error(`HTTP error! status: ${response.status}`);\n        }\n\n        const loginResponse = JSON.parse(responseText); // Parse the response text as JSON\n\n        // Do something with the login response, e.g., handle login success or error\n        if (loginResponse.error) {\n            console.error('Login error:', loginResponse.error);\n            return loginResponse.error;\n        } else {\n            console.log('Login successful:', loginResponse.message);\n            return true;\n        }\n\n    } catch (error) {\n        console.error('Error creating session:', error);\n    }\n}\n\nexport const getStudents = async (groupId) => {\n    try {\n        const response = await fetch(`${api}/students-by-group?id=${groupId}`);\n        return await response.json();\n    } catch (error) {\n        console.error(error);\n        return [];\n    }\n};\n\nexport const getGroups = async () => {\n    try {\n        const response = await fetch(`${api}/groups`);\n        return await response.json();\n    } catch (error) {\n        console.error(error);\n        return [];\n    }\n};\n\nexport const getChallenges = async (groupId) => {\n    try {\n        const response = await fetch(`${api}/challenges-by-group?id=${groupId}`);\n        return await response.json();\n    } catch (error) {\n        console.error(error);\n        return [];\n    }\n};\n\nexport const getChallenge = async (challengeId) => {\n    try {\n        const response = await fetch(`${api}/challenge-by-id?id=${challengeId}`);\n        return await response.json();\n    } catch (error) {\n        console.error(error);\n        return [];\n    }\n};\n\nexport const removeStudent = async (studentId) => {\n    try {\n        const response = await fetch(`${api}/remove-student?id=${studentId}`, {\n            method: 'DELETE',\n            credentials: 'include'\n        });\n\n        if (!response.ok) {\n            throw new Error(`HTTP error! status: ${response.status}`);\n        }\n\n        return await response.json();\n    } catch (error) {\n        console.error(error);\n        return [];\n    }\n}\n\nexport const createTeam = async (formData, setTeamSuccessfullyCreated) => {\n    try {\n        const response = await fetch(`${api}/create-team`, {\n            method: 'POST',\n            body: formData,\n        });\n        const newTeam = await response.text();\n        if (JSON.parse(newTeam).message) {\n            setTeamSuccessfullyCreated(true);\n        }\n    } catch (error) {\n        console.error('Error creating team:', error);\n    }\n}\n\nexport const removeTeam = async (groupId) => {\n    try {\n        console.log(groupId);\n        const response = await fetch(`${api}/remove-group?group_id=${groupId}`, {\n            method: 'DELETE',\n            credentials: 'include'\n        });\n\n        if (!response.ok) {\n            throw new Error(`HTTP error! status: ${response.status}`);\n        }\n\n        return await response.json();\n    } catch (error) {\n        console.error(error);\n        return [];\n    }\n}\n\n\nconst dataLayer = () => {\n    let groupsData = [];\n\n    const fetchAllData = async () => {\n        const groups = await getGroups();\n        if (groups.length > 0) {\n            for (const group of groups) {\n                let dataRow = group;\n\n                const students = await getStudents(group.id);\n                dataRow.students = students;\n\n                const challenges = await getChallenges(group.id);\n\n                for (const challenge of challenges) {\n                    await getChallenge(challenge.challenge_id)\n                        .then(data => {\n                            challenge['name'] = data[0].name;\n                            challenge['minimum_points'] = data[0].minimum_points;\n                            challenge['time_limit'] = data[0].time_limit;\n                        }).catch(error => console.error(error));\n                }\n                dataRow.challenges = challenges;\n\n                groupsData.push(dataRow);\n            }\n        } else {\n            console.warn('No groups found.');\n        }\n\n        return groupsData;\n    };\n\n    return fetchAllData();\n}\n\nexport const checkSession = async () => {\n    try {\n        const response = await fetch(`${api}/check-type`, {\n            method: 'GET',\n            credentials: 'include' // Include cookies in the request\n        });\n        \n        if (!response.ok) {\n            throw new Error(`HTTP error! status: ${response.status}`);\n        }\n\n        const userData = await response.json();\n        console.log(userData)\n\n        if (userData && userData.error) {\n            console.error('Error checking session:', userData.error);\n            return false;\n        }\n\n        // Check if user is logged in as DOCENT\n        return userData === 'DOCENT' ? true : false;\n\n    } catch (error) {\n        console.error('Error checking session:', error);\n        return false;\n    }\n}\n\nexport default dataLayer;","import React, { useEffect } from \"react\";\nimport { navigate } from \"@reach/router\";\nimport { checkSession, login } from \"./../../helpers/data/dataLayer\";\nimport \"./Login.css\";\n\nconst Login = () => {\n    // LDAP login form\n    const submitForm = async (e) => {\n        e.preventDefault();\n        const formData = new FormData();\n        formData.append('username', e.target.elements.username.value);\n        formData.append('password', e.target.elements.password.value);\n\n        let loggedIn = await login(formData);\n        if (loggedIn) {\n            navigate('/dashboard');\n        }\n    }\n\n    // Check if user is logged in as a teacher\n    useEffect(() => {\n        checkSession().then(isTeacher => {\n            isTeacher && navigate('/dashboard');\n        });\n    }, []);\n\n    return (\n        <div id=\"loginWrapper\">\n            <form id=\"loginForm\" onSubmit={(e) => { submitForm(e) }}>\n                <input type=\"text\" id=\"username\" placeholder=\"Username\" />\n                <input type=\"password\" id=\"password\" placeholder=\"Password\" />\n                <button type=\"submit\" className=\"btn\"><span>Inloggen</span></button>\n            </form>\n        </div>\n    );\n}\n\nexport default Login;","import React from \"react\";\nimport \"./../helpers/styles/reset.css\";\nimport \"./../helpers/styles/button.css\";\nimport Login from \"../components/Login/Login\";\n\nconst LoginPage = () => {\n    return (\n        <Login />\n    )\n}\n\nexport default LoginPage\n\nexport const Head = () => <title>Login</title>"],"names":["api","login","async","response","fetch","method","body","formData","credentials","responseText","text","ok","Error","status","loginResponse","JSON","parse","error","console","log","message","getStudents","groupId","json","getChallenges","getChallenge","challengeId","removeStudent","studentId","createTeam","setTeamSuccessfullyCreated","newTeam","removeTeam","checkSession","userData","groupsData","groups","getGroups","length","group","dataRow","students","id","challenges","challenge","challenge_id","then","data","name","minimum_points","time_limit","catch","push","warn","fetchAllData","useEffect","isTeacher","navigate","onSubmit","e","preventDefault","FormData","append","target","elements","username","value","password","submitForm","type","placeholder","className","Head"],"sourceRoot":""}