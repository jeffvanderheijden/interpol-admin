{"version":3,"file":"component---src-pages-dashboard-js-951dceb6394fc6433152.js","mappings":"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","sources":["webpack://admin-panel/./src/helpers/data/dataLayer.js","webpack://admin-panel/./src/components/Filter/Filter.js","webpack://admin-panel/./src/components/Modal/Modal.js","webpack://admin-panel/./src/components/Groups/Groups.js","webpack://admin-panel/./src/pages/dashboard.js"],"sourcesContent":["const api = \"https://api.jeffvanderheijden.nl/api\";\n\nexport const getStudents = async (groupId) => {\n    try {\n        const response = await fetch(`${api}/students-by-group?id=${groupId}`);\n        return await response.json();\n    } catch (error) {\n        console.error(error);\n        return [];\n    }\n};\n\nexport const getGroups = async () => {\n    try {\n        const response = await fetch(`${api}/groups`);\n        return await response.json();\n    } catch (error) {\n        console.error(error);\n        return [];\n    }\n};\n\nexport const getChallenges = async (groupId) => {\n    try {\n        const response = await fetch(`${api}/challenges-by-group?id=${groupId}`);\n        return await response.json();\n    } catch (error) {\n        console.error(error);\n        return [];\n    }\n};\n\nexport const getChallenge = async (challengeId) => {\n    try {\n        const response = await fetch(`${api}/challenge-by-id?id=${challengeId}`);\n        return await response.json();\n    } catch (error) {\n        console.error(error);\n        return [];\n    }\n};\n\nconst dataLayer = () => {\n    let groupsData = [];\n\n    const fetchAllData = async () => {\n        const groups = await getGroups();\n        if (groups.length > 0) {\n            for (const group of groups) {\n                let dataRow = group;\n\n                const students = await getStudents(group.id);\n                dataRow.students = students;\n\n                const challenges = await getChallenges(group.id);\n\n                for (const challenge of challenges) {\n                    await getChallenge(challenge.challenge_id)\n                        .then(data => {\n                            challenge['name'] = data[0].name;\n                            challenge['minimum_points'] = data[0].minimum_points;\n                            challenge['time_limit'] = data[0].time_limit;\n                        }).catch(error => console.error(error));\n                }\n                dataRow.challenges = challenges;\n\n                groupsData.push(dataRow);\n            }\n        } else {\n            console.warn('No groups found.');\n        }\n\n        return groupsData;\n    };\n\n    return fetchAllData();\n}\n\nexport const checkSession = async () => {\n    try {\n        const response = await fetch(`${api}/check-type`, {\n            method: 'GET',\n            credentials: 'include' // Include cookies in the request\n        });\n\n        if (!response.ok) {\n            throw new Error(`HTTP error! status: ${response.status}`);\n        }\n\n        const userData = await response.json();\n\n        if (userData && userData.error) {\n            console.error('Error checking session:', userData.error);\n            return false;\n        }\n\n        // Check if user is logged in as DOCENT\n        return userData === 'DOCENT' ? true : false;\n\n    } catch (error) {\n        console.error('Error checking session:', error);\n        return false;\n    }\n}\n\nexport default dataLayer;","import React from \"react\";\nimport { navigate } from \"@reach/router\";\nimport \"./Filter.css\";\n\nconst Filter = ({\n    filters,\n    setFilters\n}) => {\n    const searchGroup = (e) => {\n        setFilters({\n            ...filters,\n            searchGroup: e.target.value\n        })\n    }\n\n    const searchStudent = (e) => {\n        setFilters({\n            ...filters,\n            searchStudent: e.target.value\n        })\n    }\n\n    const logout = async () => {\n        try {\n            const response = await fetch('https://api.interpol.sd-lab.nl/api/logout.php', {\n                method: 'POST',\n                credentials: 'include' // Include cookies in the request\n            });\n    \n            if (!response.ok) {\n                throw new Error(`HTTP error! status: ${response.status}`);\n            }\n    \n            const data = await response.json();\n            console.log('Logout successful:', data.message);\n    \n            // Redirect to login page or perform other actions\n            navigate('/');\n    \n        } catch (error) {\n            console.error('Error logging out:', error);\n            // Handle error, e.g., display error message\n        }\n    }\n\n    return (\n        <section id=\"filter\">\n            <input type=\"text\" placeholder=\"Zoek door groepen..\" onChange={(e) => { searchGroup(e) }} value={filters.searchGroup} />\n            <input type=\"text\" placeholder=\"Zoek door studenten..\" onChange={(e) => { searchStudent(e) }} value={filters.searchStudent} />\n            <button onClick={() => { logout() }}>Uitloggen</button>\n        </section>\n    );\n}\n\nexport default Filter;","import React, { useState, useEffect } from 'react';\nimport Modal from 'react-modal';\n\nconst ModalComponent = ({\n    modalIsOpen,\n    afterOpenModal,\n    closeModal,\n    customStyles,\n    contentLabel\n}) => {\n    const [isClient, setIsClient] = useState(false);\n\n    useEffect(() => {\n        setIsClient(true);\n    }, []);\n\n    if (!isClient) {\n        return null;\n    }\n\n    return (\n        <Modal\n            isOpen={modalIsOpen}\n            onAfterOpen={afterOpenModal}\n            onRequestClose={closeModal}\n            style={customStyles}\n            contentLabel={contentLabel}\n        >\n            <div>test</div>\n        </Modal>\n    )\n}\n\nexport default ModalComponent;","import React, { useState } from \"react\";\nimport \"./Groups.css\";\nimport ModalComponent from \"../Modal/Modal\";\n\nconst Groups = ({\n    groups\n}) => {\n    const apiUrl = \"https://api.jeffvanderheijden.nl/\";\n    const [modalIsOpen, setModalIsOpen] = useState(false);\n\n    const openModal = () => {\n        setModalIsOpen(true);\n    };\n\n    const closeModal = () => {\n        setModalIsOpen(false); \n    };\n\n    return (\n        <>\n            <section id=\"groupHeaders\">\n                <div className=\"groupsHeader\">\n                    <h1>Groepen</h1>\n                </div>\n                <div className=\"studentsHeader\">\n                    <h1>Studentnummer</h1>\n                    <h1>Naam</h1>\n                </div>\n                <div className=\"challengesHeader\">\n                    <h1>Uitdagingen</h1>\n                </div>\n                <div className=\"challengeKeysHeader\">\n                    <h1>Code</h1>\n                </div>\n            </section>\n            <section id=\"groups\">\n                <ul id=\"group-tabs\">\n                    {/* Groups */}\n                    {groups && groups.map((group, idx) => (\n                        <li className=\"group\" key={idx}>\n                            <section className=\"groupSection\">\n                                <div className=\"groupImage\">\n                                    <img src={`${apiUrl + group.image_url}`} alt={group.name} />\n                                </div>\n                                <div>\n                                    <h2>{group.name}</h2>\n                                    <p>{group.class}</p>\n                                </div>\n                            </section>\n                            {/* Students */}\n                            <section className=\"studentsSection\">\n                                <ul>\n                                    {group.students.map((student, idx) => (\n                                        <li key={idx}>\n                                            <p>{student.student_number}</p>\n                                            <p>{student.name}</p>                                        \n                                        </li>\n                                    ))}\n                                </ul>\n                            </section>\n                            {/* Challenges */}\n                            <section className=\"challengesSection\">\n                                {group.challenges.map((challenge, idx) => (\n                                    <ul key={idx}>\n                                        <li>\n                                            <h3>{challenge.name}</h3>\n                                            <div>\n                                                {challenge.completed ? \n                                                    <span>V</span> : \n                                                    <span>X</span>\n                                                }\n                                            </div>\n                                        </li>\n                                    </ul>\n                                ))}\n                            </section>\n                            {/* Challenge keys */}\n                            <section className=\"challengeKeys\">\n                                {group.challenges.map((challenge, idx) => (\n                                    <ul key={idx}>\n                                        <li>\n                                            <h3>{challenge.keycode}</h3>\n                                        </li>\n                                    </ul>\n                                ))}\n                            </section>\n                            <section className=\"editGroup\">\n                                <button onClick={openModal}>Edit</button>\n                            </section>\n                        </li>\n                    ))}\n                </ul>                \n            </section>\n            <ModalComponent \n                modalIsOpen={modalIsOpen}\n                afterOpenModal={null}\n                closeModal={closeModal}\n                customStyles={null}\n                contentLabel=\"Edit group\"\n            />\n        </>\n    );\n}\n\nexport default Groups;","\n\nimport React, { useState, useEffect } from \"react\";\nimport { navigate } from \"@reach/router\";\nimport dataLayer, { checkSession } from \"../helpers/data/dataLayer\";\nimport \"./../helpers/styles/reset.css\";\nimport Filter from \"../components/Filter/Filter\";\nimport Groups from \"../components/Groups/Groups\";\n\nconst DashboardPage = () => {\n  const [groups, setGroups] = useState([]); \n  const [filteredGroups, setFilteredGroups] = useState([]);\n  const [filters, setFilters] = useState({ searchGroup: '', searchStudent: '' });\n  // const [isTeacher, setIsTeacher] = useState(false);\n  const [isTeacher, setIsTeacher] = useState(true);\n\n  // Check if user is logged in as a teacher\n  // useEffect(() => {\n  //   checkSession().then(isTeacher => {\n  //     setIsTeacher(isTeacher);\n  //     if (!isTeacher) {\n  //       navigate('/');\n  //     }\n  //   });\n  // }, []);\n\n  // Fetch groups and students\n  useEffect(() => {\n    if (isTeacher) {\n      const fetchData = async () => {\n          const data = await dataLayer();\n          setGroups(data);\n          setFilteredGroups(data);\n      };\n      fetchData();\n    }\n  }, [isTeacher]);\n\n  // Searches for groups\n  useEffect(() => {\n    setFilters({ ...filters, searchStudent: '' });\n    const searchQueryGroup = filters.searchGroup.toLowerCase();\n\n    const searchedGroups = groups.filter(group => {\n        const groupNameMatches = group.name.toLowerCase().includes(searchQueryGroup);\n        return groupNameMatches;\n    });\n\n    setFilteredGroups(searchedGroups);\n  }, [filters.searchGroup]);\n\n  // Searches for students\n  useEffect(() => {\n    setFilters({ ...filters, searchGroup: '' });\n    const searchQueryStudent = filters.searchStudent.toLowerCase();\n\n    const studentMatches = groups.filter(group => (\n        group.students.some(student =>\n          student.name.toLowerCase().includes(searchQueryStudent)\n        ))\n    );\n    setFilteredGroups(studentMatches);\n  }, [filters.searchStudent]);\n\n  return (    \n    <>\n      {isTeacher && (\n        <main>\n          <Filter \n            filters={filters}\n            setFilters={setFilters}\n          />\n          <Groups\n            groups={filteredGroups}\n          />\n        </main>\n      )}    \n    </>\n  )\n}\n\nexport default DashboardPage\n\nexport const Head = () => <title>Admin panel</title>\n"],"names":["api","getStudents","async","response","fetch","groupId","json","error","console","getChallenges","getChallenge","challengeId","groupsData","groups","getGroups","length","group","dataRow","students","id","challenges","challenge","challenge_id","then","data","name","minimum_points","time_limit","catch","push","warn","fetchAllData","filters","setFilters","type","placeholder","onChange","e","searchGroup","target","value","searchStudent","onClick","method","credentials","ok","Error","status","log","message","navigate","logout","modalIsOpen","afterOpenModal","closeModal","customStyles","contentLabel","isClient","setIsClient","useState","useEffect","isOpen","onAfterOpen","onRequestClose","style","setModalIsOpen","openModal","className","map","idx","key","src","image_url","alt","class","student","student_number","completed","keycode","Modal","setGroups","filteredGroups","setFilteredGroups","isTeacher","setIsTeacher","dataLayer","fetchData","searchQueryGroup","toLowerCase","searchedGroups","filter","includes","searchQueryStudent","studentMatches","some","Head"],"sourceRoot":""}