{"version":3,"file":"component---src-pages-dashboard-js-1e4d941f1bb1f3edc388.js","mappings":"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","sources":["webpack://admin-panel/./src/helpers/data/dataLayer.js","webpack://admin-panel/./src/components/Filter/Filter.js","webpack://admin-panel/./src/components/Groups/Groups.js","webpack://admin-panel/./src/pages/dashboard.js"],"sourcesContent":["const dataLayer = () => {\n    let groupsData = [];\n\n    const getGroups = async () => {\n        try {\n            const response = await fetch(\"https://api.interpol.sd-lab.nl/api/groups\");\n            return await response.json();\n        } catch (error) {\n            console.error(error);\n            return [];\n        }\n    };\n\n    const getStudents = async (groupId) => {\n        try {\n            const response = await fetch(`https://api.interpol.sd-lab.nl/api/students-by-group?id=${groupId}`);\n            return await response.json();\n        } catch (error) {\n            console.error(error);\n            return [];\n        }\n    };\n\n    const getChallenges = async (groupId) => {\n        try {\n            const response = await fetch(`https://api.interpol.sd-lab.nl/api/challenges-by-group?id=${groupId}`);\n            return await response.json();\n        } catch (error) {\n            console.error(error);\n            return [];\n        }\n    };\n\n    const getChallenge = async (challengeId) => {\n        try {\n            const response = await fetch(`https://api.interpol.sd-lab.nl/api/challenge-by-id?id=${challengeId}`);\n            return await response.json();\n        } catch (error) {\n            console.error(error);\n            return [];\n        }\n    }\n\n    const fetchAllData = async () => {\n        const groups = await getGroups();\n        if (groups.length > 0) {\n            for (const group of groups) {\n                let dataRow = group;\n\n                const students = await getStudents(group.id);\n                dataRow.students = students;\n\n                const challenges = await getChallenges(group.id);\n\n                for (const challenge of challenges) {\n                    await getChallenge(challenge.challenge_id)\n                        .then(data => {\n                            console.log(data);\n                            challenge['name'] = data[0].name;\n                            challenge['minimum_points'] = data[0].minimum_points;\n                            challenge['time_limit'] = data[0].time_limit;\n                        }).catch(error => console.error(error));\n                }\n                dataRow.challenges = challenges;\n\n                groupsData.push(dataRow);\n            }\n        } else {\n            console.warn('No groups found.');\n        }\n\n        return groupsData;\n    };\n\n    return fetchAllData();\n}\n\nexport const checkSession = async () => {\n    console.log('Checking session...');\n    try {\n        const response = await fetch('https://api.interpol.sd-lab.nl/api/check-type', {\n            method: 'GET',\n            credentials: 'include' // Include cookies in the request\n        });\n\n        if (!response.ok) {\n            throw new Error(`HTTP error! status: ${response.status}`);\n        }\n\n        const userData = await response.json();\n        console.log(userData);\n        \n        if (useData.error) {\n            console.error('Error checking session:', userData.error);\n            return false;\n        }\n\n        // Check if user is logged in as DOCENT\n        return userData.ingelogdAls = 'DOCENT' ? true : false;\n\n    } catch (error) {\n        console.error('Error checking session:', error);\n        return false;\n    }\n}\n\nexport default dataLayer;","import React from \"react\";\nimport \"./Filter.css\";\n\nconst Filter = ({\n    filters,\n    setFilters\n}) => {\n    const searchGroup = (e) => {\n        setFilters({\n            ...filters,\n            searchGroup: e.target.value\n        })\n    }\n\n    const searchStudent = (e) => {\n        setFilters({\n            ...filters,\n            searchStudent: e.target.value\n        })\n    }\n    return (\n        <section id=\"filter\">\n            <input type=\"text\" placeholder=\"Zoek door groepen..\" onChange={(e) => { searchGroup(e) }} value={filters.searchGroup} />\n            <input type=\"text\" placeholder=\"Zoek door studenten..\" onChange={(e) => { searchStudent(e) }} value={filters.searchStudent} />\n        </section>\n    );\n}\n\nexport default Filter;","import React from \"react\";\nimport \"./Groups.css\";\n\nconst Groups = ({\n    groups\n}) => {\n\n    // Change on deployment\n    const apiUrl = \"https://api.interpol.sd-lab.nl/\";\n\n    return (\n        <section id=\"groups\">\n            <ul id=\"group-tabs\">\n                {groups && groups.map((group, idx) => (\n                    <li className=\"group\" key={idx}>\n                        <section className=\"groupSection\">\n                            <div className=\"groupImage\">\n                                <img src={`${apiUrl + group.image_url}`} alt={group.name} />\n                            </div>\n                            <div>\n                                <h2>{group.name}</h2>\n                                <p>{group.class}</p>\n                            </div>\n                        </section>\n                        {/* Todo add student compontent here. */}\n                        <section className=\"studentsSection\">\n                            <ul>\n                                {group.students.map((student, idx) => (\n                                    <li key={idx}>\n                                        <p>{student.student_number}</p>\n                                        <p>{student.name}</p>                                        \n                                    </li>\n                                ))}\n                            </ul>\n                        </section>\n                        <section className=\"challengesSection\">\n                            {group.challenges.map((challenge, idx) => (\n                                <ul key={idx}>\n                                    <li>\n                                        <h3>{challenge.name}</h3>\n                                        <div>\n                                            {challenge.completed ? \n                                                <span>V</span> : \n                                                <span>X</span>\n                                            }\n                                        </div>\n                                    </li>\n                                </ul>\n                            ))}\n                        </section>\n                        <section className=\"challengeKeys\">\n                            {group.challenges.map((challenge, idx) => (\n                                <ul key={idx}>\n                                    <li>\n                                        <h3>{challenge.keycode}</h3>\n                                    </li>\n                                </ul>\n                            ))}\n                        </section>\n                    </li>\n                ))}\n            </ul>\n        </section>\n    );\n}\n\nexport default Groups;","\n\nimport React, { useState, useEffect } from \"react\";\nimport { navigate } from \"@reach/router\";\nimport dataLayer, { checkSession } from \"../helpers/data/dataLayer\";\nimport \"./../helpers/styles/reset.css\";\nimport Filter from \"../components/Filter/Filter\";\nimport Groups from \"../components/Groups/Groups\";\n\nconst DashboardPage = () => {\n  const [groups, setGroups] = useState([]); \n  const [filteredGroups, setFilteredGroups] = useState([]);\n  const [filters, setFilters] = useState({ searchGroup: '', searchStudent: '' });\n\n  useEffect(() => {\n    const fetchData = async () => {\n        const data = await dataLayer();\n        setGroups(data);\n        setFilteredGroups(data);\n    };\n    fetchData();\n  }, []);\n\n  // Check if user is logged in as a teacher\n  useEffect(() => {\n    checkSession().then(isTeacher => {\n      console.log('User is logged in as a teacher:', isTeacher)\n      if (!isTeacher) {\n        console.log('User is not logged in as a teacher.')\n        navigate('/');\n      }\n    });\n  }, [groups]);\n\n  // Searches for groups\n  useEffect(() => {\n    setFilters({ ...filters, searchStudent: '' });\n    const searchQueryGroup = filters.searchGroup.toLowerCase();\n\n    const searchedGroups = groups.filter(group => {\n        const groupNameMatches = group.name.toLowerCase().includes(searchQueryGroup);\n        return groupNameMatches;\n    });\n\n    setFilteredGroups(searchedGroups);\n  }, [filters.searchGroup]);\n\n  // Searches for students\n  useEffect(() => {\n    setFilters({ ...filters, searchGroup: '' });\n    const searchQueryStudent = filters.searchStudent.toLowerCase();\n\n    const studentMatches = groups.filter(group => (\n        group.students.some(student =>\n          student.name.toLowerCase().includes(searchQueryStudent)\n        ))\n    );\n    setFilteredGroups(studentMatches);\n  }, [filters.searchStudent]);\n\n  return (\n    <main>\n      <Filter \n        filters={filters}\n        setFilters={setFilters}\n      />\n      <Groups\n        groups={filteredGroups}\n      />\n    </main>\n  )\n}\n\nexport default DashboardPage\n\nexport const Head = () => <title>Admin panel</title>\n"],"names":["groupsData","getStudents","async","response","fetch","groupId","json","error","console","getChallenges","getChallenge","challengeId","groups","getGroups","length","group","dataRow","students","id","challenges","challenge","challenge_id","then","data","log","name","minimum_points","time_limit","catch","push","warn","fetchAllData","filters","setFilters","type","placeholder","onChange","e","searchGroup","target","value","searchStudent","map","idx","className","key","src","image_url","alt","class","student","student_number","completed","keycode","setGroups","useState","filteredGroups","setFilteredGroups","useEffect","dataLayer","fetchData","method","credentials","ok","Error","status","userData","useData","ingelogdAls","checkSession","isTeacher","navigate","searchQueryGroup","toLowerCase","searchedGroups","filter","includes","searchQueryStudent","studentMatches","some","Head"],"sourceRoot":""}